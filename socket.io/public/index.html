<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Socket Runtime Pratice</title>
    <script src="socket.io.js"></script>
</head>

<body>

    <label>Data Enter :</label>
    <br>
    <br>
    <input type="text" name="name" id="txt_name">
    <br>
    <br>
    <button onclick="dataadd()">Add Data</button>
    <br>
    <br>
    <p id="result">

    </p>





    <script>

        function dataadd() {
            const url = 'http://localhost:5000';
            let inptext = document.getElementById('txt_name').value;
            var user = {
                name: inptext
            }
            const Http = new XMLHttpRequest();
            Http.open("POST", url + "/gtdata");
            Http.setRequestHeader("Content-Type", "application/json");

            Http.send(JSON.stringify(user));

            Http.onreadystatechange = (e) => {
                if (Http.readyState === 4) {

                    let sa = JSON.parse(Http.responseText);
                    document.getElementById('result').innerHTML = sa.check + "<br>"

                }
            }
        }
        var socket = io("http://localhost:5000/");

        var name = document.getElementById("txt_name").value;
        socket.on('connect', function (name) {
            console.log("Conneted" + name);
        });

        socket.on('NOTIFICATION', function () {
            console.log("notification recieved");
        });

        socket.on("COMMON_TOPIC", function (message) {
            console.log("comon topic received", message);
        })

    </script>
</body>

</html>